version: 2

models:
  - name: stg_stripe__customers
    description: Cleaned Stripe customer data

    columns:
      - name: customer_id
        description: Stripe customer ID
        data_tests:
          - unique
          - not_null

      - name: email
        data_tests:
          - not_null

  - name: stg_stripe__charges
    description: Cleaned Stripe charge data with dollar amounts

    columns:
      - name: charge_id
        description: Stripe charge ID
        data_tests:
          - unique
          - not_null

      - name: amount_dollars
        data_tests:
          - not_null

      - name: charge_status
        data_tests:
          - accepted_values:
              arguments:
                values: ['succeeded', 'failed', 'refunded', 'pending']

  - name: stg_stripe__invoices
    description: Cleaned Stripe invoice data with dollar amounts

    columns:
      - name: invoice_id
        description: Stripe invoice ID
        data_tests:
          - unique
          - not_null

      - name: invoice_status
        data_tests:
          - accepted_values:
              arguments:
                values: ['paid', 'open', 'void', 'uncollectible']
