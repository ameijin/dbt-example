version: 2

models:
  - name: int_subscription_events
    description: >
      Timeline of subscription lifecycle events (new, upgrade, downgrade,
      cancel, reactivate) with MRR at each point.
    columns:
      - name: event_id
        data_tests:
          - unique
          - not_null

  - name: int_daily_mrr_changes
    description: >
      Gap-free daily MRR series with categorization of changes into
      new, expansion, contraction, and churn buckets.
    data_tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - date_day
              - product

  - name: int_revenue_attribution
    description: >
      Revenue attributed to acquisition channels via the
      utm_channel_mapping seed.
    columns:
      - name: subscription_id
        data_tests:
          - unique
          - not_null
